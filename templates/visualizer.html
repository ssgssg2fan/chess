<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Chess Visualizer</title>

<!-- chess.js 라이브러리 (이미 다운로드/배치한 버전 사용) -->
<script src="{{ url_for('static', filename='chess.min.js') }}"></script>
<script>
  window.MOVES = {{ moves | tojson }};
</script>
<script src="{{ url_for('static', filename='visualizer.js') }}"></script>

<style>
body {
  background:#1e1e1e;
  color:white;
  font-family: monospace;
  margin:20px;
}

#container {
  display:flex;
  gap:20px;
}

#board-container {
  position:relative;
}
#board {
  display:grid;
  grid-template-columns: repeat(8, 60px);
  border:2px solid #000;
  grid-gap:0;
  transform: rotate(180deg); /* 보드 뒤집기 */
}
.cell {
  width:60px; height:60px;
  text-align:center; line-height:60px; font-size:36px;
  margin:0; padding:0;
}
.white { background:#f0f0f0; }
.green { background:#76a86b; }
.highlight { box-shadow: inset 0 0 0 4px rgba(255,255,0,0.7); }

#panel { width:260px; }

#evalbar {
  width:20px; height:300px; background:#000000;
  position:relative; margin-bottom:20px;
}
#evalfill {
  position:absolute; bottom:0; width:100%; background:black;
}

#moves {
  max-height:360px; overflow-y:auto; font-size:14px;
}
.move { padding:2px 4px; }
.move.active { background:#444; }

button {
  background:black; color:white; border:1px solid #aaa;
  padding:6px 10px; margin-top:6px; cursor:pointer;
}
  
  <!-- 여기 태그 뜸 -->
</div>
/* 랭크/파일 표시 */
#ranks { position:absolute; top:0; left:-20px; display:flex; flex-direction:column; justify-content:space-between; height:480px; }
#files { display:grid; grid-template-columns:repeat(8,60px); margin-top:8px; }
</style>
</head>

<body>
<h2>Chess Visualizer</h2>

<div id="container">
  <div id="board-container">
    <div id="board"></div>
    <div id="ranks">
      <span>8</span><span>7</span><span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
    </div>
    <div id="files">
      <span>A</span><span>B</span><span>C</span><span>D</span><span>E</span><span>F</span><span>G</span><span>H</span>
    </div>
  </div>

  <div id="panel">

  <!-- 1. 가로 정렬 영역 (evalbar + moves ONLY) -->
  <div style="display:flex; gap:10px;">
    <div id="evalbar"><div id="evalfill"></div></div>
    <div id="moves" style="flex:1;"></div>
  </div>

  <!-- 2. 태그 (단독 줄) -->
  <div id="tag-box"
      style="
      margin:10px 0;
      padding:8px;
      border:1px solid #555;
      background:#111;
      color:#eee;
      font-size:14px;
      min-height:24px;
      text-align:center;
      ">
  </div>

  <!-- 3. 버튼 (단독 줄) -->
  <div style="margin-top:10px; text-align:center;">
    <button id="prev">◀ Prev</button>
    <button id="next">Next ▶</button><br>
    <button onclick="location.href='/'">Back</button>
  </div>
  </div>
</div>
</body>
</html>
